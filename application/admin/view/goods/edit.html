{extend name="Public:common" /}{block name="css"}<style>    .edui-editor{z-index: 1!important;}    .thumbs{width:90px;height:90px;margin: 5px;}    .thu_fill{font-size: 20px; color: #ABB1BA;opacity=0.3;margin-left:-30px; position: absolute;margin-top: 5px}    .layui-form-mid{float:none;}    .layui-input{display: inline-block;};    .layui-form-label{color:#1E9FFF}    .layui-upload-img { width: 90px; height: 90px; margin: 0; }    .pic-more { width:100%; left; margin: 10px 0px 0px 0px;}    .pic-more li { width:90px; float: left; margin-right: 5px;}    .pic-more li .layui-input { display: initial; }    .pic-more li a { position: absolute; top: 0; display: block; }    .pic-more li a i { font-size: 24px; background-color: #008800; }    #slide-pc-priview .item_img img{ width: 90px; height: 90px;}    #slide-pc-priview li{position: relative;}    #slide-pc-priview li .operate{ color: #000; display: none;}    #slide-pc-priview li .toleft{ position: absolute;top: 40px; left: 1px; cursor:pointer;}    #slide-pc-priview li .toright{ position: absolute;top: 40px; right: 1px;cursor:pointer;}    #slide-pc-priview li .close{position: absolute;top: 5px; right: 5px;cursor:pointer;}    #slide-pc-priview li:hover .operate{ display: block;}</style>{/block}{block name="content"}    <fieldset class="layui-elem-field layui-field-title">        <legend>编辑商品</legend>    </fieldset>    <form class="layui-form" method="post">        <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">            <ul class="layui-tab-title">                <li class="layui-this">基本</li>                <li>图片</li>                <li>邮费设置</li>                <li>库存/规格</li>                <li>参数</li>                <li>详情</li>                <li>购买权限</li>                <li>营销</li>                <li>会员折扣</li>            </ul>            <style>               .layui-form-label{color:#1E9FFF}               .layui-input-inline{height: 38px;line-height: 38px;border:solid 1px #D2D2D2;padding-left: 10px}               table tr td:first-child{color:#009688;text-align: right;font-weight: bold; }            </style>            <div class="layui-tab-content" style="height: 100px;">                <!--商品添加-基本开始-->                <input type="hidden" name="id" value="{$info.id}">                <div class="layui-tab-item layui-show">                    <table class="layui-table">                        <tr>                          <td>排序</td>                          <td><input type="text" value="{$info.sorts}" name="sorts" placeholder="" autocomplete="off"  class="layui-input"></td>                          <td><div class="layui-form-mid layui-word-aux">数字越大，排名越靠前，如果为空，默认排序为创建时间</div></td>                        </tr>                        <tr>                          <td>商品名称</td>                          <td><input type="text" value="{$info.title}" name="title"   lay-verify="required" placeholder=""  autocomplete="off" class="layui-input"></td>                          <td><div class="layui-form-mid layui-word-aux">商品名称必须填写</div></td>                        </tr>                        <tr>                          <td>副标题</td>                          <td><input type="text" value="{$info.subheading}" name="subheading"   lay-verify="required" placeholder="" autocomplete="off" class="layui-input"></td>                          <td><div class="layui-form-mid layui-word-aux">副标题的长度尽量控制在100字以内</div></td>                        </tr>                        <tr>                            <td>关键字</td>                            <td>                                <input type="text" value="{$info.keywords}" name="keywords"  placeholder="" autocomplete="off" class="layui-input">                            </td>                            <td><div class="layui-form-mid layui-word-aux">商品关键字，能准确搜索到的商品，比如:海尔电视|电视之类</div></td>                        </tr>                        <tr>                            <td>商品类型</td>                            <td>                                <input type="radio" name="type" value="1" title="实体商品" {if ($info['type'] eq 1)}checked='checked'{/if}>                                <input type="radio" name="type" value="2" title="虚拟商品" {if ($info['type'] eq 2)}checked='checked'{/if}>                            </td>                            <td><div class="layui-form-mid layui-word-aux">商品类型，商品保存后无法修改，请谨慎选择</div></td>                        </tr>                                                <tr>                            <td>商品分类</td>                            <td><select  id="catid" lay-verify="required" name="catid"  validate=" minlength:1, maxlength:6, required:true"  title="必须选择一个商品类型">                                    <option value="">请选择商品类型</option>                                    {$cat_tree}                                </select>                            </td>                        </tr>                        <tr>                            <td>品牌</td>                            <td><select  id="brandid"  name="brandid"  >                                    <option value="0">请选择品牌</option>                                    {volist name="brandlist" id="val"}                                    <option value="{$val.id}">{$val.name}</option>                                    {/volist}                                </select>                            </td>                        </tr>                        <tr>                            <td>商品属性</td>                            <td>                                <input type="checkbox" name="isrecommand" lay-skin="primary" value="1" title="推荐" {if ($info['isrecommand'] eq 1)}checked='checked'{/if}>                                <input type="checkbox" name="isnew" lay-skin="primary" value="1" title="新品" {if ($info['isnew'] eq 1)}checked='checked'{/if}>                                <input type="checkbox" name="ishot" lay-skin="primary" value="1" title="热卖" {if ($info['ishot'] eq 1)}checked='checked'{/if}>                                <input type="checkbox" name="isdiscount" lay-skin="primary" value="1" title="促销" {if ($info['isdiscount'] eq 1)}checked='checked'{/if}>                            </td>                            <td></td>                        </tr>                        <tr>                            <td>价格</td>                            <td>                                商品价格                                <input type="text" value="{$info.price}" name="price"  autocomplete="off" class="layui-input-inline" lay-verify="required">元&nbsp;&nbsp;&nbsp;&nbsp;                                原价                                <input type="text" value="{$info.original_price}" name="original_price"  autocomplete="off" class="layui-input-inline">元&nbsp;&nbsp;&nbsp;&nbsp;                                成本价                                <input type="text" value="{$info.cost_price}" name="cost_price"  autocomplete="off" class="layui-input-inline">元                            </td>                             <td></td>                        </tr>                        <tr>                            <td>已出售数</td>                            <td>                                <input type="text" value="{$info.sold}" name="sold"  placeholder="" autocomplete="off" class="layui-input">                            </td>                            <td></td>                        </tr>                                                <tr>                            <td>标签</td>                            <td>                                <input type="checkbox" name="quality" lay-skin="primary" title="正品保证" {if ($info['quality'] eq 1)}checked='checked'{/if}>                                <input type="checkbox" name="seven" lay-skin="primary" title="七天无理由退货" {if ($info['seven'] eq 1)}checked='checked'{/if}>                                <input type="checkbox" name="repair" lay-skin="primary" title="保修" {if ($info['repair'] eq 1)}checked='checked'{/if}>                            </td>                            <td></td>                        </tr>                        <tr>                            <td>上架</td>                            <td>                                <input type="radio" name="status" value="0" title="否" {if ($info['status'] eq 0)}checked='checked'{/if}>                                <input type="radio" name="status" value="1" title="上架" {if ($info['status'] eq 1)}checked='checked'{/if}>                            </td>                            <td></td>                        </tr>                    </table>                 </div>                <!--商品添加-基本结束-->                <div class="layui-tab-item">                    <div class="layui-form-item" id="pics">                        <div class="layui-form-label">相册图集</div>                        <div class="layui-input-block" style="width: 70%;">                            <div class="layui-upload">                                <button type="button" class="layui-btn layui-btn-primary pull-left" id="slide-pc">选择多图</button>                                <div class="pic-more">                                    <ul class="pic-more-upload-list" id="slide-pc-priview">                                        {foreach name="$info['headimg']" item="vo" key="k"}                                        <li class="item_img">                                            <div class="operate"><i class="toleft layui-icon"></i><i class="toright layui-icon"></i><i  class="close layui-icon"></i></div>                                            <img src="__STATIC__/../{$vo}" class="img" >                                            <input type="hidden" name="headimg[]" value="{$vo}" />                                        </li>                                        {/foreach}                                    </ul>                                </div>                            </div>                        </div>                    </div>                </div>                <div class="layui-tab-item">                    <table class="layui-table">                        <tr>                        <td>包邮</td>                        <td>                            <input type="radio" name="issendfree" value="0" title="不包邮" {if ($info['issendfree'] eq 0)}checked='checked'{/if}>                            <input type="radio" name="issendfree" value="1" title="包邮" {if ($info['issendfree'] eq 1)}checked='checked'{/if}>                        </td>                        <td>如果选择包邮则下面“单品满件包邮、单品满额包邮、运费设置”设置为无效。</td>                    </tr>                        <tr>                            <td>单品满件包邮</td>                            <td>                                <input type="text" value="{$info.ednum}" name="ednum"  lay-verify="" placeholder="" autocomplete="off" class="layui-input">                            </td>                            <td><div class="layui-form-mid layui-word-aux">如果设置为0或空，则不支持满件包邮</div></td>                        </tr>                        <tr>                            <td>单品满额包邮</td>                            <td>                                <input type="text" value="{$info.edmoney}" name="edmoney" lay-verify="" placeholder="" autocomplete="off" class="layui-input">                            </td>                            <td><div class="layui-form-mid layui-word-aux">如果设置为0或空，则不支持满额包邮</div></td>                        </tr>                        <tr>                            <td class="layui-form-td">运费设置</td>                            <td>                                <input type="text" value="{$info.dispatchprice}" name="dispatchprice"  lay-verify="" placeholder="" autocomplete="off" class="layui-input-inline"> 元                            </td>                            <td></td>                        </tr>                    </table>                    </div>                       <!--商品添加-库存/规格开始-->                <div class="layui-tab-item">                    <table class="layui-table">                        <tr>                           <td>编码</td>                           <td><input type="text" value="{$info.goodssn}" name="goodssn"  lay-verify="" autocomplete="off" class="layui-input"></td>                           <td></td>                        </tr>                        <tr>                           <td>条码</td>                           <td><input type="text" value="{$info.productsn}" name="productsn" lay-verify="" autocomplete="off" class="layui-input"></td>                           <td></td>                        </tr>                        <tr>                           <td>库存</td>                           <td>                                <input type="text" value="{$info.total}" name="total" lay-verify="" autocomplete="off" class="layui-input-inline">                                <input type="checkbox" name="showtotal" lay-skin="primary" title="显示库存" value="1" {if ($info['showtotal'] eq 1)}checked='checked'{/if}>                           </td>                           <td><div class="layui-form-mid layui-word-aux">商品剩余数量，如启用多规格或虚拟卡密则无效</div></td>                        </tr>                        <tr>                           <td></td>                           <td>                            <input type="radio" name="totalcnf" value="0" title="拍下减库存" {if ($info['totalcnf'] eq 0)}checked='checked'{/if}>                            <input type="radio" name="totalcnf" value="1" title="付款减库存" {if ($info['totalcnf'] eq 1)}checked='checked'{/if}>                            <input type="radio" name="totalcnf" value="2" title="永不减库存" {if ($info['totalcnf'] eq 2)}checked='checked'{/if}>                            </td>                           <td></td>                        </tr>                                            </table>                    </div>                <!--商品添加-库存/规格结束-->                <!--参数开始-->                <div class="layui-tab-item">                    <table class="layui-table">                        {foreach name="$info['parameter']" item="vo" key="k"}                        <tr>                            <td>参数名-值</td>                            <td>                            <input type="text" value="{$k}" name="parameter[]" lay-verify="" autocomplete="off" class="layui-input-inline"> -                            <input type="text" value="{$vo}" name="parameter_value[]" lay-verify="" autocomplete="off" class="layui-input-inline">&nbsp;&nbsp;&nbsp;<button class="layui-btn layui-btn-sm layui-btn-normal" id="deltr"><i class="layui-icon"></i> 删除</button></td>                        </tr>                        {/foreach}                        <tr>                            <td colspan="2" style="text-align: center"><span id="addtr" style="cursor:pointer;font-size:30px;">+</span></td>                        </tr>                    </table>                </div>                <!--参数结束-->                <!--详情开始-->                <div class="layui-tab-item">                     <div class="layui-form-item" style="height: 600px;">                        <script src="LIB/ueditor/ueditor.config.js">/*引入配置文件*/</script>                        <script src="LIB/ueditor/ueditor.all.js">/*引入源码文件*/</script>                        <textarea id="content" name="content" style="border:1px solid #E5E5E5;height:500px">{$info.content}</textarea>                            <script type="text/javascript">                            UE.getEditor("content");//实例化编辑器  传参,id为将要被替换的容器。                        </script>                    </div>                </div>                <!--详情结束-->                <!--购买权限开始-->                <div class="layui-tab-item">                    <table class="layui-table">                    <tr>                        <td>单次最多购买</td>                        <td>                            <input type="text" value="{$info.maxbuy}" name="maxbuy" lay-verify="pass" placeholder="" autocomplete="off" class="layui-input-inline"> 件                        </td>                        <td><div class="layui-form-mid layui-word-aux"> 用户单次购买商品数量限制</div></td>                    </tr>                    <tr>                        <td>单次最低购买</td>                        <td>                            <input type="text" value="{$info.minbuy}" name="minbuy" lay-verify="" placeholder="" autocomplete="off" class="layui-input-inline"> 件                        </td>                        <td><div class="layui-form-mid layui-word-aux"> 用户单次最少购买数量限制</div></td>                    </tr>                    <tr>                        <td>最多购买</td>                        <td>                            <input type="text" value="{$info.usermaxbuy}" name="usermaxbuy" lay-verify="" placeholder="" autocomplete="off" class="layui-input-inline"> 件                                                    </td>                        <td><div class="layui-form-mid layui-word-aux"> 用户购买过此商品数量限制</div></td>                    </tr>                                       </table>                </div>                <!--购买权限结束-->                <!--营销开始-->                <div class="layui-tab-item">                    <table class="layui-table">                        <!-- <tr>                            <td>促销方式</td>                            <td>                            <input type="checkbox" name="isdiscount" lay-skin="primary" title="促销" value="1" >                            <input type="checkbox" name="istime" lay-skin="primary" title="限时卖" value="1" >                            </td>                            <td></td>                        </tr> -->                        <tr>                            <td>积分赠送</td>                            <td><input type="text" value="{$info.credit}" name="credit" lay-verify="" placeholder="" autocomplete="off" class="layui-input-inline"> 分</td>                            <td><div class="layui-form-mid layui-word-aux">会员购物赠送的积分，如果不填写或填写0，则默认为不赠送积分，如果带%则按成交价的比例计算积分</div>                            <div class="layui-form-mid layui-word-aux">如:购买2件，设置10元，不管成交价格多少，则购买后获得20积分</div>                            <div class="layui-form-mid layui-word-aux">如:购买2件，设置10%积分，成交价格2*200=400，则购买后获得40积分(400*10%)</div></td>                        </tr>                        <tr>                            <td>余额返现</td>                            <td><input type="text" value="{$info.money}" name="money" lay-verify="pass" placeholder="" autocomplete="off" class="layui-input-inline"> 元</td>                            <td><div class="layui-form-mid layui-word-aux">会员购物返现，如果不填写或填写0，则默认为不返现，如果带%则按成交价的比例计算返现</div>                            <div class="layui-form-mid layui-word-aux">如:购买2件，设置10元，不管成交价格多少，则购买后获得20元</div>                            <div class="layui-form-mid layui-word-aux">如:购买2件，设置10%元，成交价格2*200=400，则购买后获得40元返现(400*10%)</div></td>                        </tr>                        <tr>                            <td>重复购买折扣</td>                            <td><input type="text" value="{$info.buyagain}" name="buyagain" lay-verify="pass" placeholder="" autocomplete="off" class="layui-input-inline"> 折</td>                            <td><div class="layui-form-mid layui-word-aux">重复购买此商品，享受的折扣</div></td>                        </tr>                         <tr>                            <td>持续使用</td>                            <td><input type="radio" name="buyagain_islong" value="1" title="是" {if ($info['buyagain_islong'] eq 1)}checked='checked'{/if}>                            <input type="radio" name="buyagain_islong" value="0" title="否" {if ($info['buyagain_islong'] eq 0)}checked='checked'{/if}></td>                            <td><div class="layui-form-mid layui-word-aux">购买一次后，以后都使用此折扣</div></td>                        </tr>                         <tr>                            <td>使用条件</td>                            <td><input type="radio" name="buyagain_condition" value="0" title="订单付款后" {if ($info['buyagain_condition'] eq 0)}checked='checked'{/if}>                            <input type="radio" name="buyagain_condition" value="1" title="订单完成后" {if ($info['buyagain_condition'] eq 1)}checked='checked'{/if}></td>                            <td><div class="layui-form-mid layui-word-aux">重复购买使用条件，是付款后还是完成后，默认是付款后</div></td>                        </tr>                         <tr>                            <td>可以使用优惠</td>                            <td><input type="radio" name="buyagain_sale" value="1" title="是" {if ($info['buyagain_sale'] eq 1)}checked='checked'{/if}>                            <input type="radio" name="buyagain_sale" value="0" title="否" {if ($info['buyagain_sale'] eq 0)}checked='checked'{/if}></td>                            <td><div class="layui-form-mid layui-word-aux">重复购买时，是否与其他优惠共享！其他优惠享受后，在使用这个折扣(其他优惠不包含优惠券)</div></td>                        </tr>                    </table>                </div>                <!--营销结束-->                <!--会员折扣开始-->                <div class="layui-tab-item">                  <table class="layui-table">                     <tr>                        <td>不参与会员折扣</td>                        <td>                            <input type="radio" name="notiscount" value="0" title="不参与" {if ($info['notiscount'] eq 0)}checked='checked'{/if}>                            <input type="radio" name="notiscount" value="1" title="参与" {if ($info['notiscount'] eq 1)}checked='checked'{/if}>                        </td>                        <td></td>                    </tr>                    <tr>                        <td>会员折扣</td>                        <td><input type="text" value="{$info.hui_discount}" name="hui_discount" lay-verify="" autocomplete="off" class="layui-input-inline"> 折</td>                        <td></td>                    </tr>                    <tr>                        <td>或者会员价</td>                        <td><input type="text" value="{$info.hui_price}" name="hui_price" lay-verify="" autocomplete="off" class="layui-input-inline"> 元</td>                        <td></td>                    </tr>                    <tr><td>说明</td><td colspan="2">                        <h3>统一设置折扣0.1—10之间</h3>                        <div class="layui-form-mid layui-word-aux">只有当折扣大于0，小于10才能生效，否则按自身会员等级折扣计算</div>                        <div class="layui-form-mid layui-word-aux">如果折扣为空或者为0，则不设置折扣，折扣和固定金额都有，则优先使用折扣</div>                        <div class="layui-form-mid layui-word-aux">如果会员价为空或者0，则不设置会员价</div>                      </td></tr>                  </table>                  </div>                <!--会员折扣结束-->                <div style="text-align: center;margin: 10px;">                    <button type="button" class="layui-btn" lay-submit="" lay-filter="submit">提交</button>                    <a href="{:url('index')}" class="layui-btn layui-btn-primary">返回列表</a>                </div>            </div>        </div>          </form>{/block}{block name="js"}  <script>    layui.use(['form','upload','layedit','laydate','jquery','element'], function () {        var form = layui.form,upload = layui.upload,layedit = layui.layedit,laydate = layui.laydate,$ = layui.jquery;element = layui.element;        //多图片上传        upload.render({            elem: '#slide-pc',            url: "{:url('admin/common/upload')}",            size: 500,            exts: 'jpg|png|jpeg',            multiple: true,            before: function(obj) {            layer.msg('图片上传中...', {                icon: 16,                shade: 0.01,                time: 0            })            },            done: function(res) {                layer.close(layer.msg());//关闭上传提示窗口                if(res.status == 0) {                    return layer.msg(res.message);                }                $('#slide-pc-priview').append('<li class="item_img"><div class="operate"><i class="toleft layui-icon"></i><i class="toright layui-icon"></i><i  class="close layui-icon"></i></div><img src="__STATIC__/../' + res.filepath + '" class="img" ><input type="hidden" name="headimg[]" value="' + res.filepath + '" /></li>');            }        });        //点击多图上传的X,删除当前的图片        $("body").on("click",".close",function(){            $(this).closest("li").remove();        });        //多图上传点击<>左右移动图片        $("body").on("click",".pic-more ul li .toleft",function(){            var li_index=$(this).closest("li").index();            if(li_index>=1){                $(this).closest("li").insertBefore($(this).closest("ul").find("li").eq(Number(li_index)-1));            }        });        $("body").on("click",".pic-more ul li .toright",function(){            var li_index=$(this).closest("li").index();            $(this).closest("li").insertAfter($(this).closest("ul").find("li").eq(Number(li_index)+1));        });        form.on('submit(submit)', function (data) {            $.post('{:url()}', data.field, function (res) {                if (res.code > 0) {                    layer.msg(res.msg, {time: 1800, icon: 1}, function () {                        //location.href = res.url;                        window.location.href="{:url('index')}"                    });                } else {                    layer.msg(res.msg, {time: 1800, icon: 2});                }            });        });                $('.layui-form').on('click','#addtr',function(){             $(this).parent().parent().before('<tr><td>参数名-值</td><td><input type="text" name="parameter[]" lay-verify="" autocomplete="off" class="layui-input-inline"> - <input type="text" name="parameter_value[]" lay-verify="" autocomplete="off" class="layui-input-inline">&nbsp;&nbsp;&nbsp;<button class="layui-btn layui-btn-sm layui-btn-normal" id="deltr"><i class="layui-icon"></i> 删除</button></td></tr>');        });        $('.layui-form').on('click','#deltr',function(){            $(this).parent().parent().remove();        });    });</script>{/block}