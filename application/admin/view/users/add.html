{extend name="Public:common" /}{block name="content"}<div class="layui-fluid"><div class="layui-row layui-col-space15"><div class="layui-col-md12"><div class="layui-card"><div class="layui-card-body">        <fieldset class="layui-elem-field layui-field-title">            <legend>添加会员</legend>        </fieldset>        <form class="layui-form" method="post" enctype="multipart/form-data">            <div class="layui-form-item">                <label class="layui-form-label">所属用户组</label>                <div class="layui-input-inline">                    <select id="level" name="level" class="valid">                        <option value="">请选择会员组</option>                        {volist name="user_level" id="vo"}                        <option value="{$vo.level_id}">{$vo.level_name}</option>                        {/volist}                    </select>                </div>            </div>            <div class="layui-form-item">                <label class="layui-form-label">{:lang('nickname')}</label>                <div class="layui-input-inline">                    <input type="text" id="username" name="username" lay-verify="required" placeholder="{:lang('pleaseEnter')}{:lang('nickname')}" autocomplete="off" class="layui-input"></div>            </div>            <div class="layui-form-item">                <label class="layui-form-label">{:lang('email')}</label>                <div class="layui-input-inline">                    <input type="text" id="email" name="email" lay-verify="eamil" placeholder="输入{:lang('email')}"  autocomplete="off" class="layui-input">                </div>                <div class="layui-form-mid layui-word-aux">                    必填：用于找回密码                </div>            </div>            <div class="layui-form-item">                <label class="layui-form-label">{:lang('tel')}</label>                <div class="layui-input-inline">                    <input type="text" name="mobile"  lay-verify="mobile" placeholder="输入{:lang('tel')}" class="layui-input">                </div>                <div class="layui-form-mid layui-word-aux">                    只能填写数字                </div>            </div>            <div class="layui-form-item">                <label class="layui-form-label">{:lang('pwd')}</label>                <div class="layui-input-inline">                    <input type="password" name="password" placeholder="输入{:lang('pwd')}" class="layui-input">                </div>                <div class="layui-form-mid layui-word-aux">                    密码必须大于6位，小于15位                </div>            </div>            <div class="layui-form-item">                <div class="layui-inline">                    <label class="layui-form-label">{:lang('sex')}</label>                    <div class="layui-input-block">                        <input type="radio" name="sex" value="1" title="男" checked="checked">                        <input type="radio" name="sex" value="0" title="女">                    </div>                </div>            </div>            <div class="layui-form-item">                <label class="layui-form-label">{:lang('qq')}</label>                <div class="layui-input-inline">                    <input type="text" name="qq"  placeholder="输入{:lang('qq')}" class="layui-input">                </div>            </div>            <div class="layui-form-item" id="area-picker">                <div class="layui-form-label">所在地</div>                <div class="layui-input-inline" >                    <select name="province" lay-verify="required" lay-search="" lay-skin="select" lay-filter="province" >                        <option value="请选择省">请选择省</option>                        {foreach name="arealist" item="v"}                        <option value="{$v.area_name}" title="{$v.id}">{$v.area_name}</option>                        {/foreach}                    </select>                </div>                <div class="layui-input-inline" >                    <select name="city" lay-verify="required" lay-search="" lay-skin="select" lay-filter="city" id="city">                        <option value="请选择市">请选择市</option>                    </select>                </div>                <div class="layui-input-inline" >                    <select name="area" lay-verify="required" lay-search=""lay-skin="select" lay-filter="area" id="area">                        <option value="请选择县/区">请选择县/区</option>                    </select>                </div>                <div class="layui-input-inline" >                    <select name="street"  lay-search=""lay-skin="select" lay-filter="street" id="street">                        <option value="请选择镇/街道">请选择镇/街道</option>                    </select>                </div>            </div>            <div class="layui-form-item">                <div class="layui-input-block">                    <button type="button" class="layui-btn" lay-submit="" lay-filter="submit">{:lang('submit')}</button>                    <a href="{:url('index')}" class="layui-btn layui-btn-primary">{:lang('back')}</a>                </div>            </div>        </form> </div></div></div></div></div>{/block}{block name="js"}<script>    layui.use(['form','upload','layedit','laydate','jquery','rate'], function () {        var form = layui.form,            upload = layui.upload,            layedit = layui.layedit,            laydate = layui.laydate,            $ = layui.jquery,            rate = layui.rate;        //自定义验证规则        form.verify({        });        //监听提交        form.on('submit(submit)', function (data) {            // 提交到方法 默认为本身            var loading = layer.load(1, {shade: [0.1, '#fff']});            $.post("", data.field, function (res) {                layer.close(loading);                if (res.code > 0) {                    layer.msg(res.msg, {time: 1800, icon: 1}, function () {                        location.href = res.url;                    });                } else {                    layer.msg(res.msg, {time: 1800, icon: 2});                }            });        });        //监听省份选择        form.on('select(province)', function(data){            var indexGID = data.elem.selectedIndex;            //获取当前选中下拉项的自定义属性值            var dataid = data.elem[indexGID].title;            $('#city').html('<option value="">请选择市/县</option>');            $('#area').html('<option value="">请选择镇区</option>');            $('#street').html('<option value="">请选择街道</option>');            $.ajax( {                url:"{:url('admin/users/getchildarea')}",                data: {parent_id: dataid},                type:'POST',                dataType:'json',                success:function(data1) {                    if (data1.error == 0) {                        $("#city").append(data1.option);                        form.render('select'); //刷新select选择框渲染                    }                }            });        });        form.on('select(city)', function(data){            var indexGID = data.elem.selectedIndex;            //获取当前选中下拉项的自定义属性值            var dataid = data.elem[indexGID].title;            $('#area').html('<option value="">请选择镇区</option>');            $('#street').html('<option value="">请选择街道</option>');            $.ajax( {                url:"{:url('admin/users/getchildarea')}",                data: {parent_id: dataid},                type:'POST',                dataType:'json',                success:function(data1) {                    if (data1.error == 0) {                        $("#area").append(data1.option);                        form.render('select'); //刷新select选择框渲染                    }                }            });        });        //监听省份选择        form.on('select(area)', function(data){            var indexGID = data.elem.selectedIndex;            //获取当前选中下拉项的自定义属性值            var dataid = data.elem[indexGID].title;            $('#street').html('<option value="">请选择街道</option>');            $.ajax( {                url:"{:url('admin/users/getchildarea')}",                data: {parent_id: dataid},                type:'POST',                dataType:'json',                success:function(data1) {                    if (data1.error == 0) {                        $("#street").append(data1.option);                        form.render('select'); //刷新select选择框渲染                    }                }            });        });        });</script>{/block}